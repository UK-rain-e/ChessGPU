{"version":3,"sources":["Scripts/movement.js","Scripts/MainCameraController.js","animation/tween.js","Scripts/MousePick.js","Scripts/pickable.js"],"names":[],"mappings":"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","sourcesContent":["// movement.js\nvar Movement = pc.createScript('movement');\n\nMovement.attributes.add('speed', {\n    type: 'number',\n    default: 0.1,\n    min: 0.05,\n    max: 0.5,\n    precision: 2,\n    description: 'Controls the movement speed'\n});\n\n// initialize code called once per entity\nMovement.prototype.initialize = function () {\n    this.force = new pc.Vec3();\n};\n\n// update code called every frame\nMovement.prototype.update = function (dt) {\n    if (this.entity.rigidbody === undefined) {\n        return;\n    }\n\n    var forceX = 0;\n    var forceZ = 0;\n    var forceY = 0;\n\n    // calculate force based on pressed keys\n    if (this.app.keyboard.isPressed(pc.KEY_M)) {\n        // var tween1 = this.entity.tween(this.entity.getLocalPosition()).to(this.entity.getLocalPosition.x, this.entity.getLocalPosition.y + 5, this.entity.getLocalPosition.z, 1.0, pc.ExponentialIn).tween(this.entity.getLocalPosition()).to({x: -5, y: 0, z: -5}, 1.0, pc.ExponentialIn);\n    // this.entity.tween(this.entity.getLocalPosition()).to(this.entity.getLocalPosition.x, this.entity.getLocalPosition.y + 5, this.entity.getLocalPosition.z, 1.0, pc.ExponentialIn).tween(this.entity.getLocalPosition()).to({x: -5, y: 0, z: -5}, 1.0, pc.ExponentialIn).start();\n\n        // this.startTween.chain\n    }\n\n    if (this.app.keyboard.isPressed(pc.KEY_LEFT)) {\n        forceX = -this.speed;\n    }\n\n    if (this.app.keyboard.isPressed(pc.KEY_RIGHT)) {\n        forceX += this.speed;\n    }\n\n    if (this.app.keyboard.isPressed(pc.KEY_UP)) {\n        forceZ = -this.speed;\n    }\n\n    if (this.app.keyboard.isPressed(pc.KEY_DOWN)) {\n        forceZ += this.speed;\n    }\n\n    if (this.app.keyboard.isPressed(pc.KEY_SPACE)) {\n        if (this.entity.getPosition().y < 0.051) {\n            forceY = 50 * this.speed;\n        }\n    }\n\n    this.force.x = forceX;\n    this.force.z = forceZ;\n\n    // if we have some non-zero force\n    if (this.force.length()) {\n\n        // calculate force vector\n        var rX = Math.cos(-Math.PI * 0.25);\n        var rY = Math.sin(-Math.PI * 0.25);\n        this.force.set(this.force.x * rX - this.force.z * rY, 0, this.force.z * rX + this.force.x * rY);\n\n        // clamp force to the speed\n        if (this.force.length() > this.speed) {\n            this.force.normalize().scale(this.speed);\n        }\n    }\n    this.force.y = forceY;\n\n    // apply impulse to move the entity\n    this.entity.rigidbody.applyImpulse(this.force);\n};\n\n\n","// MainCameraController.js\nvar MainCameraController = pc.createScript('mainCameraController');\n\nMainCameraController.attributes.add('moveSpeed', { type: 'number', default: 0.003 });\nMainCameraController.attributes.add('enableCinematic', { type: 'boolean', default: false });\n\nMainCameraController.prototype.getDistance = function(pointA, pointB) {\n    var dx = pointB.x - pointA.x;\n    var dy = pointB.y - pointA.y;\n    var dz = pointB.z - pointA.z;\n\n    return Math.sqrt(dx * dx + dy * dy + dz * dz);\n};\n\n// initialize code called once per entity\nMainCameraController.prototype.initialize = function() {\n    this.mouseDown = false;\n    this.camera = this.entity.camera;\n    this.target = new pc.Vec3(0, 0, 0); // Set the target position\n    this.scrollSpeed = 0.5;\n    this.phi = Math.atan(this.entity.getPosition().x / this.entity.getPosition().z); // Angle in the vertical plane\n\n    this.startTime = Date.now();\n    \n    this.hypotenuse = this.getDistance(new pc.Vec3(0, 0, 0), new pc.Vec3(this.entity.getPosition().x, 0, this.entity.getPosition().z));\n    this.theta = Math.atan(this.entity.getPosition().y / this.hypotenuse);\n    this.distance = this.getDistance(this.entity.getPosition(), this.target); \n\n    if (this.enableCinematic) {\n        this.cinematicFlyInit();\n        this.positionCurves = new pc.CurveSet([\n            [0, 4.0, \n            0.66, 1.0, \n            1.33, 1.0,\n            2, -1],\n\n            [0, 1.0, \n            0.66, 1.0, \n            1.33, 1.0,\n            2, 1.0],\n\n            [0, 3.0, \n            0.66, 3.0, \n            1.33, 4.5,\n            2, 4.5]\n        ]);\n\n        this.positionCurves.type = pc.CURVE_SPLINE;\n    }\n\n    console.log(this.positionCurves);\n\n    // Attach mouse event listeners\n    this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n    this.app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n    this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n    this.app.mouse.on(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n};\n\nMainCameraController.prototype.onMouseDown = function(event) {\n    // Check if the left mouse button is pressed\n    if (event.button === pc.MOUSEBUTTON_LEFT) {\n        this.mouseDown = true;\n    }\n};\n\nMainCameraController.prototype.onMouseUp = function(event) {\n    // Check if the left mouse button is released\n    if (event.button === pc.MOUSEBUTTON_LEFT) {\n        this.mouseDown = false;\n    }\n};\n\nMainCameraController.prototype.onMouseMove = function(event) {\n    // Check if the left mouse button is pressed\n    if (this.mouseDown) {\n        // Get the movement delta from the mouse\n        var dx = event.dx;\n        var dy = event.dy;\n\n        // Update the angles based on the mouse movement\n        var new_theta = this.theta += dy * this.moveSpeed;\n        \n        this.theta = pc.math.clamp(this.theta, -Math.PI / 2, Math.PI / 2);\n\n        var new_phi = this.phi -= dx * this.moveSpeed;\n        if (new_phi > -Math.phi)\n        this.theta = pc.math.clamp(this.theta, -Math.PI / 2, Math.PI / 2);\n\n        // Calculate the new position of the camera based on spherical coordinates\n        this.updateCameraPosition();\n\n        this.entity.lookAt(0, 0, 0, 0, 1, 0);\n    }\n};\n\nMainCameraController.prototype.onMouseWheel = function(event) {\n    // Adjust the distance based on the scroll speed and direction\n    this.distance -= event.wheel * this.scrollSpeed;\n\n    // Make sure the distance is within reasonable bounds\n    this.distance = pc.math.clamp(this.distance, 1, 100);\n\n    this.updateCameraPosition();\n};\n\nMainCameraController.prototype.updateCameraPosition = function() {\n    var x = this.distance * Math.sin(this.phi) * Math.cos(this.theta);\n    var y = this.distance * Math.sin(this.theta);\n    var z = this.distance * Math.cos(this.phi) * Math.cos(this.theta);\n\n    // Set the new position of the camera\n    this.entity.setPosition(this.target.x + x, this.target.y + y, this.target.z + z);\n};\n\nMainCameraController.prototype.cinematicFlyInit = function() {\n    \n\n    console.log(\"init curve finish\");\n};\n\n// update code called every frame\nMainCameraController.prototype.update = function (dt) {\n    if (this.enableCinematic) {\n        var timeSinceStart = Date.now() - this.startTime;\n        var pos = this.positionCurves.value(timeSinceStart / 1000.0);\n        this.entity.setPosition(pos[0], pos[1], pos[2]);\n    }\n\n    this.timeSinceStart\n};\n\n","// tween.js\npc.extend(pc, function () {\n\n    /**\n     * @name pc.TweenManager\n     * @description Handles updating tweens\n     * @param {pc.AppBase} app - The AppBase instance.\n     */\n    var TweenManager = function (app) {\n        this._app = app;\n        this._tweens = [];\n        this._add = []; // to be added\n    };\n\n    TweenManager.prototype = {\n        add: function (tween) {\n            this._add.push(tween);\n            return tween;\n        },\n\n        update: function (dt) {\n            var i = 0;\n            var n = this._tweens.length;\n            while (i < n) {\n                if (this._tweens[i].update(dt)) {\n                    i++;\n                } else {\n                    this._tweens.splice(i, 1);\n                    n--;\n                }\n            }\n\n            // add any tweens that were added mid-update\n            if (this._add.length) {\n                for (let i = 0; i < this._add.length; i++) {\n                    if (this._tweens.indexOf(this._add[i]) > -1) continue;\n                    this._tweens.push(this._add[i]);\n                }\n                this._add.length = 0;\n            }\n        }\n    };\n\n    /**\n     * @name  pc.Tween\n     * @param {object} target - The target property that will be tweened\n     * @param {pc.TweenManager} manager - The tween manager\n     * @param {pc.Entity} entity - The pc.Entity whose property we are tweening\n     */\n    var Tween = function (target, manager, entity) {\n        pc.events.attach(this);\n\n        this.manager = manager;\n\n        if (entity) {\n            this.entity = null; // if present the tween will dirty the transforms after modify the target\n        }\n\n        this.time = 0;\n\n        this.complete = false;\n        this.playing = false;\n        this.stopped = true;\n        this.pending = false;\n\n        this.target = target;\n\n        this.duration = 0;\n        this._currentDelay = 0;\n        this.timeScale = 1;\n        this._reverse = false;\n\n        this._delay = 0;\n        this._yoyo = false;\n\n        this._count = 0;\n        this._numRepeats = 0;\n        this._repeatDelay = 0;\n\n        this._from = false; // indicates a \"from\" tween\n\n        // for rotation tween\n        this._slerp = false; // indicates a rotation tween\n        this._fromQuat = new pc.Quat();\n        this._toQuat = new pc.Quat();\n        this._quat = new pc.Quat();\n\n        this.easing = pc.Linear;\n\n        this._sv = {}; // start values\n        this._ev = {}; // end values\n    };\n\n    var _parseProperties = function (properties) {\n        var _properties;\n        if (properties instanceof pc.Vec2) {\n            _properties = {\n                x: properties.x,\n                y: properties.y\n            };\n        } else if (properties instanceof pc.Vec3) {\n            _properties = {\n                x: properties.x,\n                y: properties.y,\n                z: properties.z\n            };\n        } else if (properties instanceof pc.Vec4) {\n            _properties = {\n                x: properties.x,\n                y: properties.y,\n                z: properties.z,\n                w: properties.w\n            };\n        } else if (properties instanceof pc.Quat) {\n            _properties = {\n                x: properties.x,\n                y: properties.y,\n                z: properties.z,\n                w: properties.w\n            };\n        } else if (properties instanceof pc.Color) {\n            _properties = {\n                r: properties.r,\n                g: properties.g,\n                b: properties.b\n            };\n            if (properties.a !== undefined) {\n                _properties.a = properties.a;\n            }\n        } else {\n            _properties = properties;\n        }\n        return _properties;\n    };\n    Tween.prototype = {\n        // properties - js obj of values to update in target\n        to: function (properties, duration, easing, delay, repeat, yoyo) {\n            this._properties = _parseProperties(properties);\n            this.duration = duration;\n\n            if (easing) this.easing = easing;\n            if (delay) {\n                this.delay(delay);\n            }\n            if (repeat) {\n                this.repeat(repeat);\n            }\n\n            if (yoyo) {\n                this.yoyo(yoyo);\n            }\n\n            return this;\n        },\n\n        from: function (properties, duration, easing, delay, repeat, yoyo) {\n            this._properties = _parseProperties(properties);\n            this.duration = duration;\n\n            if (easing) this.easing = easing;\n            if (delay) {\n                this.delay(delay);\n            }\n            if (repeat) {\n                this.repeat(repeat);\n            }\n\n            if (yoyo) {\n                this.yoyo(yoyo);\n            }\n\n            this._from = true;\n\n            return this;\n        },\n\n        rotate: function (properties, duration, easing, delay, repeat, yoyo) {\n            this._properties = _parseProperties(properties);\n\n            this.duration = duration;\n\n            if (easing) this.easing = easing;\n            if (delay) {\n                this.delay(delay);\n            }\n            if (repeat) {\n                this.repeat(repeat);\n            }\n\n            if (yoyo) {\n                this.yoyo(yoyo);\n            }\n\n            this._slerp = true;\n\n            return this;\n        },\n\n        start: function () {\n            var prop, _x, _y, _z;\n\n            this.playing = true;\n            this.complete = false;\n            this.stopped = false;\n            this._count = 0;\n            this.pending = (this._delay > 0);\n\n            if (this._reverse && !this.pending) {\n                this.time = this.duration;\n            } else {\n                this.time = 0;\n            }\n\n            if (this._from) {\n                for (prop in this._properties) {\n                    if (this._properties.hasOwnProperty(prop)) {\n                        this._sv[prop] = this._properties[prop];\n                        this._ev[prop] = this.target[prop];\n                    }\n                }\n\n                if (this._slerp) {\n                    this._toQuat.setFromEulerAngles(this.target.x, this.target.y, this.target.z);\n\n                    _x = this._properties.x !== undefined ? this._properties.x : this.target.x;\n                    _y = this._properties.y !== undefined ? this._properties.y : this.target.y;\n                    _z = this._properties.z !== undefined ? this._properties.z : this.target.z;\n                    this._fromQuat.setFromEulerAngles(_x, _y, _z);\n                }\n            } else {\n                for (prop in this._properties) {\n                    if (this._properties.hasOwnProperty(prop)) {\n                        this._sv[prop] = this.target[prop];\n                        this._ev[prop] = this._properties[prop];\n                    }\n                }\n\n                if (this._slerp) {\n                    _x = this._properties.x !== undefined ? this._properties.x : this.target.x;\n                    _y = this._properties.y !== undefined ? this._properties.y : this.target.y;\n                    _z = this._properties.z !== undefined ? this._properties.z : this.target.z;\n\n                    if (this._properties.w !== undefined) {\n                        this._fromQuat.copy(this.target);\n                        this._toQuat.set(_x, _y, _z, this._properties.w);\n                    } else {\n                        this._fromQuat.setFromEulerAngles(this.target.x, this.target.y, this.target.z);\n                        this._toQuat.setFromEulerAngles(_x, _y, _z);\n                    }\n                }\n            }\n\n            // set delay\n            this._currentDelay = this._delay;\n\n            // add to manager when started\n            this.manager.add(this);\n\n            return this;\n        },\n\n        pause: function () {\n            this.playing = false;\n        },\n\n        resume: function () {\n            this.playing = true;\n        },\n\n        stop: function () {\n            this.playing = false;\n            this.stopped = true;\n        },\n\n        delay: function (delay) {\n            this._delay = delay;\n            this.pending = true;\n\n            return this;\n        },\n\n        repeat: function (num, delay) {\n            this._count = 0;\n            this._numRepeats = num;\n            if (delay) {\n                this._repeatDelay = delay;\n            } else {\n                this._repeatDelay = 0;\n            }\n\n            return this;\n        },\n\n        loop: function (loop) {\n            if (loop) {\n                this._count = 0;\n                this._numRepeats = Infinity;\n            } else {\n                this._numRepeats = 0;\n            }\n\n            return this;\n        },\n\n        yoyo: function (yoyo) {\n            this._yoyo = yoyo;\n            return this;\n        },\n\n        reverse: function () {\n            this._reverse = !this._reverse;\n\n            return this;\n        },\n\n        chain: function () {\n            var n = arguments.length;\n\n            while (n--) {\n                if (n > 0) {\n                    arguments[n - 1]._chained = arguments[n];\n                } else {\n                    this._chained = arguments[n];\n                }\n            }\n\n            return this;\n        },\n\n        onUpdate: function (callback) {\n            this.on('update', callback);\n            return this;\n        },\n\n        onComplete: function (callback) {\n            this.on('complete', callback);\n            return this;\n        },\n\n        onLoop: function (callback) {\n            this.on('loop', callback);\n            return this;\n        },\n\n        update: function (dt) {\n            if (this.stopped) return false;\n\n            if (!this.playing) return true;\n\n            if (!this._reverse || this.pending) {\n                this.time += dt * this.timeScale;\n            } else {\n                this.time -= dt * this.timeScale;\n            }\n\n            // delay start if required\n            if (this.pending) {\n                if (this.time > this._currentDelay) {\n                    if (this._reverse) {\n                        this.time = this.duration - (this.time - this._currentDelay);\n                    } else {\n                        this.time -= this._currentDelay;\n                    }\n                    this.pending = false;\n                } else {\n                    return true;\n                }\n            }\n\n            var _extra = 0;\n            if ((!this._reverse && this.time > this.duration) || (this._reverse && this.time < 0)) {\n                this._count++;\n                this.complete = true;\n                this.playing = false;\n                if (this._reverse) {\n                    _extra = this.duration - this.time;\n                    this.time = 0;\n                } else {\n                    _extra = this.time - this.duration;\n                    this.time = this.duration;\n                }\n            }\n\n            var elapsed = (this.duration === 0) ? 1 : (this.time / this.duration);\n\n            // run easing\n            var a = this.easing(elapsed);\n\n            // increment property\n            var s, e;\n            for (var prop in this._properties) {\n                if (this._properties.hasOwnProperty(prop)) {\n                    s = this._sv[prop];\n                    e = this._ev[prop];\n                    this.target[prop] = s + (e - s) * a;\n                }\n            }\n\n            if (this._slerp) {\n                this._quat.slerp(this._fromQuat, this._toQuat, a);\n            }\n\n            // if this is a entity property then we should dirty the transform\n            if (this.entity) {\n                this.entity._dirtifyLocal();\n\n                // apply element property changes\n                if (this.element && this.entity.element) {\n                    this.entity.element[this.element] = this.target;\n                }\n\n                if (this._slerp) {\n                    this.entity.setLocalRotation(this._quat);\n                }\n            }\n\n            this.fire(\"update\", dt);\n\n            if (this.complete) {\n                var repeat = this._repeat(_extra);\n                if (!repeat) {\n                    this.fire(\"complete\", _extra);\n                    if (this.entity)\n                        this.entity.off('destroy', this.stop, this);\n                    if (this._chained) this._chained.start();\n                } else {\n                    this.fire(\"loop\");\n                }\n\n                return repeat;\n            }\n\n            return true;\n        },\n\n        _repeat: function (extra) {\n            // test for repeat conditions\n            if (this._count < this._numRepeats) {\n                // do a repeat\n                if (this._reverse) {\n                    this.time = this.duration - extra;\n                } else {\n                    this.time = extra; // include overspill time\n                }\n                this.complete = false;\n                this.playing = true;\n\n                this._currentDelay = this._repeatDelay;\n                this.pending = true;\n\n                if (this._yoyo) {\n                    // swap start/end properties\n                    for (var prop in this._properties) {\n                        var tmp = this._sv[prop];\n                        this._sv[prop] = this._ev[prop];\n                        this._ev[prop] = tmp;\n                    }\n\n                    if (this._slerp) {\n                        this._quat.copy(this._fromQuat);\n                        this._fromQuat.copy(this._toQuat);\n                        this._toQuat.copy(this._quat);\n                    }\n                }\n\n                return true;\n            }\n            return false;\n        }\n\n    };\n\n\n    /**\n     * Easing methods\n     */\n\n    var Linear = function (k) {\n        return k;\n    };\n\n    var QuadraticIn = function (k) {\n        return k * k;\n    };\n\n    var QuadraticOut = function (k) {\n        return k * (2 - k);\n    };\n\n    var QuadraticInOut = function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    };\n\n    var CubicIn = function (k) {\n        return k * k * k;\n    };\n\n    var CubicOut = function (k) {\n        return --k * k * k + 1;\n    };\n\n    var CubicInOut = function (k) {\n        if ((k *= 2) < 1) return 0.5 * k * k * k;\n        return 0.5 * ((k -= 2) * k * k + 2);\n    };\n\n    var QuarticIn = function (k) {\n        return k * k * k * k;\n    };\n\n    var QuarticOut = function (k) {\n        return 1 - (--k * k * k * k);\n    };\n\n    var QuarticInOut = function (k) {\n        if ((k *= 2) < 1) return 0.5 * k * k * k * k;\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    };\n\n    var QuinticIn = function (k) {\n        return k * k * k * k * k;\n    };\n\n    var QuinticOut = function (k) {\n        return --k * k * k * k * k + 1;\n    };\n\n    var QuinticInOut = function (k) {\n        if ((k *= 2) < 1) return 0.5 * k * k * k * k * k;\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    };\n\n    var SineIn = function (k) {\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        return 1 - Math.cos(k * Math.PI / 2);\n    };\n\n    var SineOut = function (k) {\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        return Math.sin(k * Math.PI / 2);\n    };\n\n    var SineInOut = function (k) {\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    };\n\n    var ExponentialIn = function (k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    };\n\n    var ExponentialOut = function (k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    };\n\n    var ExponentialInOut = function (k) {\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        if ((k *= 2) < 1) return 0.5 * Math.pow(1024, k - 1);\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    };\n\n    var CircularIn = function (k) {\n        return 1 - Math.sqrt(1 - k * k);\n    };\n\n    var CircularOut = function (k) {\n        return Math.sqrt(1 - (--k * k));\n    };\n\n    var CircularInOut = function (k) {\n        if ((k *= 2) < 1) return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    };\n\n    var ElasticIn = function (k) {\n        var s, a = 0.1, p = 0.4;\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        if (!a || a < 1) {\n            a = 1; s = p / 4;\n        } else s = p * Math.asin(1 / a) / (2 * Math.PI);\n        return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n    };\n\n    var ElasticOut = function (k) {\n        var s, a = 0.1, p = 0.4;\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        if (!a || a < 1) {\n            a = 1; s = p / 4;\n        } else s = p * Math.asin(1 / a) / (2 * Math.PI);\n        return (a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    };\n\n    var ElasticInOut = function (k) {\n        var s, a = 0.1, p = 0.4;\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        if (!a || a < 1) {\n            a = 1; s = p / 4;\n        } else s = p * Math.asin(1 / a) / (2 * Math.PI);\n        if ((k *= 2) < 1) return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n        return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    };\n\n    var BackIn = function (k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    };\n\n    var BackOut = function (k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    };\n\n    var BackInOut = function (k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) return 0.5 * (k * k * ((s + 1) * k - s));\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    };\n\n    var BounceOut = function (k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        } else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        } else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\n    };\n\n    var BounceIn = function (k) {\n        return 1 - BounceOut(1 - k);\n    };\n\n    var BounceInOut = function (k) {\n        if (k < 0.5) return BounceIn(k * 2) * 0.5;\n        return BounceOut(k * 2 - 1) * 0.5 + 0.5;\n    };\n\n    return {\n        TweenManager: TweenManager,\n        Tween: Tween,\n        Linear: Linear,\n        QuadraticIn: QuadraticIn,\n        QuadraticOut: QuadraticOut,\n        QuadraticInOut: QuadraticInOut,\n        CubicIn: CubicIn,\n        CubicOut: CubicOut,\n        CubicInOut: CubicInOut,\n        QuarticIn: QuarticIn,\n        QuarticOut: QuarticOut,\n        QuarticInOut: QuarticInOut,\n        QuinticIn: QuinticIn,\n        QuinticOut: QuinticOut,\n        QuinticInOut: QuinticInOut,\n        SineIn: SineIn,\n        SineOut: SineOut,\n        SineInOut: SineInOut,\n        ExponentialIn: ExponentialIn,\n        ExponentialOut: ExponentialOut,\n        ExponentialInOut: ExponentialInOut,\n        CircularIn: CircularIn,\n        CircularOut: CircularOut,\n        CircularInOut: CircularInOut,\n        BackIn: BackIn,\n        BackOut: BackOut,\n        BackInOut: BackInOut,\n        BounceIn: BounceIn,\n        BounceOut: BounceOut,\n        BounceInOut: BounceInOut,\n        ElasticIn: ElasticIn,\n        ElasticOut: ElasticOut,\n        ElasticInOut: ElasticInOut\n    };\n}());\n\n// Expose prototype methods and create a default tween manager on the AppBase\n(function () {\n    // Add pc.AppBase#addTweenManager method\n    pc.AppBase.prototype.addTweenManager = function () {\n        this._tweenManager = new pc.TweenManager(this);\n\n        this.on(\"update\", function (dt) {\n            this._tweenManager.update(dt);\n        });\n    };\n\n    // Add pc.AppBase#tween method\n    pc.AppBase.prototype.tween = function (target) {\n        return new pc.Tween(target, this._tweenManager);\n    };\n\n    // Add pc.Entity#tween method\n    pc.Entity.prototype.tween = function (target, options) {\n        var tween = this._app.tween(target);\n        tween.entity = this;\n\n        this.once('destroy', tween.stop, tween);\n\n        if (options && options.element) {\n            // specifiy a element property to be updated\n            tween.element = options.element;\n        }\n        return tween;\n    };\n\n    // Create a default tween manager on the AppBase\n    var AppBase = pc.AppBase.getApplication();\n    if (AppBase) {\n        AppBase.addTweenManager();\n    }\n})();\n\n","// MousePick.js\nvar MousePick = pc.createScript('mousePick');\n\n// initialize code called once per entity\nMousePick.prototype.initialize = function () {\n    this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onSelect, this);\n\n    this.app.mouse.disableContextMenu();\n    this.on('destroy', function () {\n        this.app.mouse.off(pc.EVENT_MOUSEDOWN, this.onSelect, this);\n    }, this);\n\n    this.app.on(\"mousepick:add\", this.addItem, this);\n    this.pickableEntities = [];\n    this.currentPicked = null;\n    this.currentPickedStartTime = null;\n    this.currentPickedCurve = null;\n};\n\nMousePick.prototype.addItem = function (entity) {\n    this.pickableEntities.push(entity);\n}\n\nMousePick.prototype.onSelect = function (event) {\n    if (event.button !== pc.MOUSEBUTTON_LEFT) {\n        return;\n    }\n\n    var from = this.entity.camera.screenToWorld(event.x, event.y, this.entity.camera.nearClip);\n    var to = this.entity.camera.screenToWorld(event.x, event.y, this.entity.camera.farClip);\n\n    var result = this.app.systems.rigidbody.raycastFirst(from, to);\n    if (!result) {\n        return;\n    }\n    if (result.entity.parent.name !== 'pieces') {\n        return;\n    }\n\n    if (this.currentPicked !== null) {\n        return;\n    }\n\n    var oldPos = result.entity.getLocalPosition();\n\n    var newPos = new pc.Vec3(oldPos.x, oldPos.y, oldPos.z + 2);\n    var duration = 1.0;\n\n    this.currentPickedCurve = new pc.CurveSet(\n        [[\n            0.0, oldPos.x,\n            duration, newPos.x,\n        ],\n\n        [\n            0.0, oldPos.y,\n            duration, newPos.y,\n        ],\n\n        [\n            0.0, oldPos.z,\n            duration, newPos.z,\n        ],\n        ]\n    );\n\n    console.log(this.currentPickedCurve);\n\n    this.currentPicked = result.entity;\n    this.currentPickedStartTime = Date.now();\n\n    result.entity.rigidbody.enabled = false;\n    result.entity.collision.enabled = false;\n\n\n    // result.entity\n    //     .tween(pos)\n    //     .to({x: pos.x, y: pos.y, z: pos.z + 2}, 1.0, pc.QuadraticInOut)\n    //     // .yoyo(true)\n    //     // .repeat(2)\n    //     .start();\n\n    // {x: pos.x, y: pos.y, z: pos.z + 2}\n\n    // 0. change raycast\n    // 1. why animation doesn't update the local position after execution ?\n    // 2. stack animations\n};\n\n\nMousePick.prototype.update = function (dt) {\n    if (this.currentPicked !== null) {\n        var delta = (Date.now() - this.currentPickedStartTime) / 1000.0;\n        if (delta > 1.0) {\n            this.currentPicked.rigidbody.enabled = true;\n            this.currentPicked.collision.enabled = true;\n            this.currentPicked = null;\n            this.currentPickedCurve = null;\n            this.currentPickedStartTime = null;\n            return;\n        }\n\n        var pos = this.currentPickedCurve.value(delta);\n        console.log(this.currentPicked.getLocalPosition().toString());\n        // this.currentPicked.rigidbody.applyForce(0, 0, 0.1);\n        this.currentPicked.setLocalPosition(pos[0], pos[1], pos[2]);\n        console.log(this.currentPicked.getLocalPosition().toString());\n        console.log(this.currentPicked);\n        // console.log(pos[0], pos[1], pos[2]);\n    }\n};\n\n\n","// pickable.js\nvar Pickable = pc.createScript('pickable');\n\n// initialize code called once per entity\nPickable.prototype.initialize = function() {\n\n};\n\nPickable.prototype.postInitialize = function() {\n    this.app.fire(\"mousepick:add\", this.entity);    \n};\n\n// update code called every frame\nPickable.prototype.update = function(dt) {\n\n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// Pickable.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n"]}